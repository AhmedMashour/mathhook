# Cargo configuration for cross-compilation
# Used by Docker builder image

[target.aarch64-unknown-linux-gnu]
linker = "aarch64-linux-gnu-gcc"

[target.x86_64-unknown-linux-musl]
linker = "musl-gcc"

[target.aarch64-unknown-linux-musl]
linker = "aarch64-linux-gnu-gcc"
rustflags = ["-C", "target-feature=-crt-static"]

# macOS cross-compilation (via zig)
[target.x86_64-apple-darwin]
rustflags = [
    "-C", "link-arg=-F/opt/MacOSX.sdk/System/Library/Frameworks",
    "-C", "link-arg=-L/opt/MacOSX.sdk/usr/lib",
]

[target.aarch64-apple-darwin]
rustflags = [
    "-C", "link-arg=-F/opt/MacOSX.sdk/System/Library/Frameworks",
    "-C", "link-arg=-L/opt/MacOSX.sdk/usr/lib",
]

[target.x86_64-pc-windows-msvc]
linker = "lld-link"
rustflags = [
    "-Lnative=/opt/xwin/crt/lib/x86_64",
    "-Lnative=/opt/xwin/sdk/lib/um/x86_64",
    "-Lnative=/opt/xwin/sdk/lib/ucrt/x86_64"
]

[target.x86_64-pc-windows-msvc.env]
CC_x86_64_pc_windows_msvc = "clang-cl"
CXX_x86_64_pc_windows_msvc = "clang-cl"
AR_x86_64_pc_windows_msvc = "llvm-lib"

[net]
git-fetch-with-cli = true
